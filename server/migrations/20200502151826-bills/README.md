# Migration `20200502151826-bills`

This migration has been generated by maticzav at 5/2/2020, 3:18:26 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Period" AS ENUM ('ANNUALLY', 'MONTHLY');

ALTER TABLE "public"."Bill" ADD COLUMN "expires" timestamp(3)  NOT NULL ,
ADD COLUMN "period" "Period" NOT NULL ;

ALTER TABLE "public"."Purchase" DROP COLUMN "billingPeriod",
DROP COLUMN "plan",
DROP COLUMN "planId";

DROP TYPE "BillingPeriod"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200502145238-init..20200502151826-bills
--- datamodel.dml
+++ datamodel.dml
@@ -1,29 +1,25 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 generator client {
   provider = "prisma-client-js"
 }
 model Purchase {
-  id            String           @default(cuid()) @id
-  createdAt     DateTime         @default(now())
-  updatedAt     DateTime         @updatedAt
+  id        String           @default(cuid()) @id
+  createdAt DateTime         @default(now())
+  updatedAt DateTime         @updatedAt
   // Installation Info
-  ghAccount     String           @unique
-  name          String
-  company       String?
-  email         String
-  type          InstallationType
-  // Purchase
-  planId        Int
-  plan          String
-  billingPeriod BillingPeriod
+  ghAccount String           @unique
+  name      String
+  company   String?
+  email     String
+  type      InstallationType
   // Billing
-  bills         Bill[]
+  bills     Bill[]
 }
 model Bill {
   id         String   @default(cuid()) @id
@@ -31,11 +27,14 @@
   updatedAt  DateTime @updatedAt
   // Purchase
   purchase   Purchase @relation(fields: [purchaseId], references: [id])
   purchaseId String
+  // Bill Info
+  expires    DateTime
+  period     Period
 }
-enum BillingPeriod {
+enum Period {
   ANNUALLY
   MONTHLY
 }
```
