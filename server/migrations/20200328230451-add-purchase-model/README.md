# Migration `20200328230451-add-purchase-model`

This migration has been generated by maticzav at 3/28/2020, 11:04:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "InstallationType" AS ENUM ('ORGANIZATION', 'USER');

CREATE TABLE "public"."Purchase" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "owner" text  NOT NULL DEFAULT '',
    "plan" text  NOT NULL DEFAULT '',
    "planId" text  NOT NULL DEFAULT '',
    "trial" boolean  NOT NULL DEFAULT false,
    "type" "InstallationType" NOT NULL DEFAULT 'ORGANIZATION',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Log" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "data" text   ,
    "event" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "message" text  NOT NULL DEFAULT '',
    "owner" text  NOT NULL DEFAULT '',
    "repository" text   ,
    "type" "LogType" NOT NULL DEFAULT 'DEBUG',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200326222204-add-event-field-to-log..20200328230451-add-purchase-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,28 +1,46 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 generator client {
   provider = "prisma-client-js"
 }
+model Purchase {
+  id        String           @default(cuid()) @id
+  createdAt DateTime         @default(now())
+  updatedAt DateTime         @updatedAt
+  // Info
+  owner     String
+  type      InstallationType
+  // Purchase
+  planId    String
+  plan      String
+  trial     Boolean          @default(false)
+}
+
+enum InstallationType {
+  ORGANIZATION
+  USER
+}
+
 model Log {
-  id        String   @id @default(cuid())
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
-
+  id         String   @default(cuid()) @id
+  createdAt  DateTime @default(now())
+  updatedAt  DateTime @updatedAt
   // Log
-  event   String
-  type    LogType
-  message String
-  data    String?
-
+  event      String
+  type       LogType
+  message    String
+  data       String?
   // Reference information
   owner      String
   repository String?
 }
 enum LogType {
-  DEBUG INFO WARN
+  DEBUG
+  INFO
+  WARN
 }
```


