datasource postgresql {
  provider = "postgresql"
  url = "***"
}

generator client {
  provider = "prisma-client-js"
}

model Purchase {
  id            String           @default(cuid()) @id
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt
  // Installation Info
  ghAccount     String           @unique
  name          String
  company       String?
  email         String
  type          InstallationType
  // Purchase
  planId        Int
  plan          String
  billingPeriod BillingPeriod
  // Billing
  bills         Bill[]
}

model Bill {
  id         String   @default(cuid()) @id
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  // Purchase
  purchase   Purchase @relation(fields: [purchaseId], references: [id])
  purchaseId String
}

enum BillingPeriod {
  ANNUALLY
  MONTHLY
}

enum InstallationType {
  ORGANIZATION
  USER
}

model StripeBill {
  id        String   @default(cuid()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}